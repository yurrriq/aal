\usepackage[ddmmyyyy]{datetime}
\renewcommand{\dateseparator}{.}

\usepackage{fontspec}
\setmonofont[Mapping=tex-text,Scale]{Iosevka}

\usepackage{hyperref}
\newcommand{\hrefootnote}[2]{\href{#1}{#2}\footnote{\url{#1}}}
\makeatletter
\hypersetup{
  pdffitwindow=true,
  pdfstartview={FitH},
  pdfauthor={Eric Bailey <eric@ericb.me>},
  pdfsubject={%
    A literate Expect script, written with Noweb and built with Nix, to
    automate AWS Azure login, so I don't have to type my password, or even use
    passmenu.%
  },
  pdfkeywords={AWS, Azure, SSO, Expect},
  pdfinfo={
    CreationDate={D:20191220212500},
    ModificationDate={D:\pdfdate},
  },
  colorlinks=true
}
\makeatother

\usepackage[outputdir=../docs]{minted}
\setminted{autogobble,baselinestretch=1,fontsize=\small}
\newmintinline[sh]{bash}{}

%% HACK: https://tex.stackexchange.com/a/200725/45537
\usepackage{ifxetex}
\ifxetex
  \newcommand{\textls}[2][5]{%
    \begingroup\addfontfeatures{LetterSpace=#1}#2\endgroup
  }
  \renewcommand{\allcapsspacing}[1]{\textls[15]{#1}}
  \renewcommand{\smallcapsspacing}[1]{\textls[10]{#1}}
  \renewcommand{\allcaps}[1]{\textls[15]{\MakeTextUppercase{#1}}}
  \renewcommand{\smallcaps}[1]{\smallcapsspacing{\scshape\MakeTextLowercase{#1}}}
  \renewcommand{\textsc}[1]{\smallcapsspacing{\textsmallcaps{#1}}}
\fi


\usepackage{noweb}
\noweboptions{smallcode,shortxref,hideunuseddefs,noidentxref,nomargintag,webnumbering}
